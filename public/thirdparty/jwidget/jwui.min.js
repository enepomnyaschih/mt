/*!
    jWidget UI 2.0

    http://enepomnyaschih.github.io/jwidget/#!/guide/home

    Copyright (C) 2015 Egor Nepomnyaschih

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
var JW;(function(a){var b;(function(d){var s={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};var j=/^<([\w:]+)/;var n=null;function q(t,w){var u=a.Map.map(w,function(x){return new d.Template(x)});if(t.prototype.Templates&&t.prototype.Templates.componentCls==t){a.apply(t.prototype.Templates.prototype,u)}else{function v(){}v.prototype=(t.prototype.Templates||a.Class).prototype;t.prototype.Templates=function(){};t.prototype.Templates.prototype=new v();t.prototype.Templates.componentCls=t;a.apply(t.prototype.Templates.prototype,u);t.prototype.templates=new t.prototype.Templates()}}d.template=q;function l(t){return t instanceof jQuery.fn.init}d.isElement=l;function k(t){t.preventDefault()}d.preventDefault=k;function m(w){var u=jQuery(w);var t=u[0].tagName.toLowerCase();if(t==="input"){var v=u.attr("type");return(v==="text")||(v!=="password")}return t==="textarea"}d.isLifeInput=m;function r(u,v,t){if((t==null)||(t>=u.childNodes.length)){u.appendChild(v)}else{u.insertBefore(v,u.childNodes.item(t))}}d.insert=r;function g(t){if(t.parentNode){t.parentNode.removeChild(t)}}d.remove=g;function e(v){if(n){n.textContent=""}else{n=document.createDocumentFragment()}var x=document.createElement("div");n.appendChild(x);var u=j.exec(v)[1];var w=s[u]||s._default;x.innerHTML=w[1]+v+w[2];for(var t=0;t<w[0];++t){x=(x.firstChild)}return(x.firstChild)}d.parseHtml=e;function f(u,t){return(" "+u.className+" ").indexOf(t)!==-1}d.hasClass=f;function i(u,t){if(!u.className){u.className=t}else{if(!f(u,t)){u.className+=" "+t}}}d.addClass=i;function h(t){while(t){if(t.tagName.toLowerCase()==="body"){return true}t=(t.parentNode)}return false}d.inDom=h;function p(t,u){while(t){if(t===u){return true}t=t.parentElement}return false}d.inEl=p;function c(w,y,u){var v=w.parentNode;if(!v){return}var x=u?w.getAttribute("id"):null,t=u?w.getAttribute("class"):null;v.replaceChild(y,w);if(x){y.setAttribute("id",x)}if(t){i(y,t)}}d.replace=c;function o(t){t._afterAppend()}d._afterAppend=o;(function(t){t.optgroup=t.option;t.tbody=t.tfoot=t.colgroup=t.caption=t.thead;t.th=t.td})(s);jQuery(function(){d.windowEl=jQuery(window);d.bodyEl=jQuery(document.body)})})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(e){__extends(f,e);function f(h,g){e.call(this);this.el=g;this.own(h.createInserter({addItem:this._addItem,removeItem:this._removeItem,scope:this}))}f.prototype._getElement=function(g){throw new SyntaxError("Method not implemented")};f.prototype._addItem=function(j,h){var i=this.el;var g=i.childNodes[h];var k=this._getElement(j);if(g!=null){i.insertBefore(k,g)}else{i.appendChild(k)}};f.prototype._removeItem=function(h,g){d.remove(this._getElement(h))};return f})(a.Class);d.AbstractInserter=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(c){var d=(function(e){__extends(f,e);function f(){e.apply(this,arguments);this.prefixes=null;this.parentIdMap=null;this.childIdMap=null;this.ids=null;this.requiresAfterAppend=false}f.prototype.createElement=function(){throw new SyntaxError("Method not implemented")};f.prototype._addElement=function(i,g,h){throw new SyntaxError("Method not implemented")};f.prototype._compileAttributes=function(h){this.prefixes=a.String.parseClass(h.getAttribute("jwclass"));h.removeAttribute("jwclass");for(var j=0,g=this.prefixes.length;j<g;++j){c.addClass(h,this.prefixes[j])}this.parentIdMap={};this.childIdMap={};this._walkAll(h);this.ids=[];this._backtrace("root");var k=a.Map.getKeys(this.parentIdMap);if(k.length!==0){a.Array.each(k,this._backtrace,this);k=a.Map.getKeys(this.parentIdMap);if(k.length!==0){console.warn("jWidget template '"+this.prefixes.join(" ")+"' has cyclic dependencies among the next jwid's: "+k.join(", ")+". Can't detect the desired rendering order. Rendering elements in arbitrary order...");this.ids.push.apply(this.ids,k)}}this.prefixes=null;this.parentIdMap=null;this.childIdMap=null};f.prototype._walkAll=function(g){var h=this;this._walk(g,[],[],function(o,u){var t=o.getAttribute("jwid");if(!t){return null}var k=a.String.parseClass(t);o.removeAttribute("jwid");var q=k.length;if(q===0){return null}for(var s=0;s<q;++s){var m=k[s];for(var r=0,p=h.prefixes.length;r<p;++r){c.addClass(o,h.prefixes[r]+"-"+m)}h._addElement(m,o,u)}return k},this);this._addElement("root",g,[])};f.prototype._walk=function(g,w,x,u,v){if(g.nodeType!==1){return}var p=u.call(v,g,w);if(w.length===0){p=p||[];p.push("root")}if(p!==null){for(var q=0,k=p.length;q<k;++q){var n=p[q];this.parentIdMap[n]=this.parentIdMap[n]||{};for(var o=0,h=x.length;o<h;++o){var r=x[o];this.childIdMap[r]=this.childIdMap[r]||{};this.parentIdMap[n][r]=true;this.childIdMap[r][n]=true}}x=p}var s=w.length;w.push(0);var t=g.childNodes;for(var q=0,k=t.length;q<k;++q){w[s]=q;this._walk(t[q],w,x,u,v)}w.pop()};f.prototype._backtrace=function(k){var g=this.parentIdMap[k];if(g===undefined){return}for(var j in g){if(this.parentIdMap.hasOwnProperty(j)){return}}delete this.parentIdMap[k];this.ids.push(k);var h=this.childIdMap[k];for(var i in h){this._backtrace(i)}};return f})(a.Class);c.AbstractTemplate=d})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(){f.call(this);this.parent=null;this.wasAfterAppend=false;this.el=null;this.children=null;this._template=null;this._elements=null;this._replaceables=null;this._arrays=null;this._collections=null;this._template=this.templates.main}e.prototype.destroy=function(){if(this.parent){throw new Error("JW.UI.Component.destroy must be used for root and detached components only")}if(this.wasAfterAppend){this.releaseDom()}if(this.el){d.remove(this.el[0]);a.Set.each(this._collections,a.destroy);this._collections=null;a.Set.each(this._arrays,a.destroy);this._arrays=null;a.Set.each(this._replaceables,a.destroy);this._replaceables=null;this.children.unrender();this.unrender();this.children.destroy();this.children=null;this.el.remove()}this._elements=null;this.el=null;this.afterDestroy();f.prototype.destroy.call(this)};e.prototype.beforeRender=function(){};e.prototype.afterRender=function(){};e.prototype.afterAppend=function(){};e.prototype.releaseDom=function(){};e.prototype.unrender=function(){};e.prototype.afterDestroy=function(){};e.prototype.createElement=function(){return this._template.createElement()};e.prototype.using=function(g){this._template=(typeof g==="string")?new d.Template(g):(g instanceof d.Template)?g:new d.DomTemplate(g);
return this};e.prototype.render=function(){if(this.el){return this}var i=this.createElement();this.el=jQuery(i.root);this._elements=a.Map.map(i.groups,function(o){return jQuery(o)});this.children=new e.Children(this);this._replaceables={};this._arrays={};this._collections={};this.beforeRender();var l=a.apply({},this._elements);for(var n in l){var k=l[n];var m=a.Array.filter(k,function(o){return d.inEl(o,this.el[0])},this);if(m.length===0){delete this._elements[n];continue}if(m.length!==k.length){k=jQuery(m);this._elements[n]=k}var h=a.String.camel(n);var j="render"+a.String.capitalize(h);if(typeof this[j]==="function"){var g=this[j](k);if(n==="root"){if(g instanceof a.AbstractArray){this.addArray(g,n)}else{if(g instanceof a.AbstractCollection){this.addCollection(g,n)}}}else{if(g instanceof e){this.children.set(g,n)}else{if(g instanceof a.Property){this.addReplaceable(g,n)}else{if(g instanceof a.AbstractArray){this.addArray(g,n)}else{if(g instanceof a.AbstractCollection){this.addCollection(g,n)}else{if(g===false){this.removeElement(n)}}}}}}}}this.afterRender();if(this._template.requiresAfterAppend){this._afterAppend()}return this};e.prototype.renderTo=function(g){this.render();jQuery(g)[0].appendChild(this.el[0]);this._afterAppend();return this};e.prototype.renderAs=function(g){this.render();d.replace(jQuery(g)[0],this.el[0],true);this._afterAppend();return this};e.prototype.remove=function(){if(this.parent){throw new Error("JW.UI.Component.remove must be used for root components only")}d.remove(this.el[0]);return this};e.prototype.getElement=function(g){return this._elements[g]};e.prototype.removeElement=function(h){var g=this._elements[h];if(!g){return}g.remove();delete this._elements[h]};e.prototype.addReplaceable=function(g,h){return new a.UI.Component.Replaceable(this,g,h)};e.prototype.addArray=function(h,g){return new e.Array(this,h,this._getContainerElement(g))};e.prototype.addCollection=function(h,g){return new e.Collection(this,h,this._getContainerElement(g))};e.prototype._afterAppend=function(){if(this.wasAfterAppend||!this.el){return}if(this.parent&&!this.parent.wasAfterAppend){return}if(!this.parent&&!d.inDom(this.el[0])){return}this.wasAfterAppend=true;this.afterAppend();this.children.each(d._afterAppend);a.Set.each(this._arrays,d._afterAppend);a.Set.each(this._collections,d._afterAppend)};e.prototype._initChild=function(g){g.render();g.parent=this};e.prototype._doneChild=function(g){g.parent=null};e.prototype._getContainerElement=function(g){return(g===undefined)?this.el:(typeof g==="string")?this._elements[g]:jQuery(g)};return e})(a.Class);d.Component=c;var c;(function(l){var h=(function(o){__extends(n,o);function n(q,r,p){var t=this;o.call(this);this.parent=q;this.source=r;a.Set.add(q._arrays,this);var s=this.own(r.createMapper({createItem:function(u){t.parent._initChild(u);return u},destroyItem:function(u){t.parent._doneChild(u)},scope:this}));this.own(new l.Inserter(s.target,p[0]))}n.prototype.destroy=function(){a.Set.remove(this.parent._arrays,this);o.prototype.destroy.call(this)};n.prototype._afterAppend=function(){this.source.each(d._afterAppend)};return n})(a.Class);l.Array=h;var m=(function(o){__extends(n,o);function n(p,q){o.call(this);this.parent=p;this.child=q}n.prototype.attach=function(p){this.name=p;this._el=this.parent._elements[p];this.parent._initChild(this.child);this.parent._elements[p]=this.child.el;d.replace(this._el[0],this.child.el[0],true);this.child._afterAppend()};n.prototype.detach=function(){if(this.parent._elements[this.name]===this.child.el){this.parent._elements[this.name]=this._el}d.replace(this.child.el[0],this._el[0]);this.parent._doneChild(this.child);this._el=null;this.name=null};return n})(a.Class);l.Child=m;var g=(function(n){__extends(o,n);function o(){n.apply(this,arguments)}o.prototype.trySet=function(s,q){var p=n.prototype.trySet.call(this,s,q);if(p===undefined){return}var r=p.value;if(r){r.detach()}s.attach(q);return p};o.prototype.trySetKey=function(q,r){var p=n.prototype.trySetKey.call(this,q,r);if(p===undefined){return}p.detach();p.attach(r);return p};o.prototype.tryRemove=function(p){var q=n.prototype.tryRemove.call(this,p);if(q===undefined){return}q.detach();return q};o.prototype.trySplice=function(p,q){var r=n.prototype.trySplice.call(this,p,q);if(r===undefined){return}a.Map.each(r.removedItems,this._detach,this);a.Map.each(r.addedItems,this._attach,this);return r};o.prototype.tryClear=function(){var p=n.prototype.tryClear.call(this);if(p===undefined){return}a.Map.each(p,this._detach,this);return p};o.prototype.tryReindex=function(t){var p=n.prototype.tryReindex.call(this,t);if(p===undefined){return}for(var r in t){var s=t[r];var q=this.get(s);q.detach();q.attach(s)}return p};o.prototype._attach=function(q,p){q.attach(p)};o.prototype._detach=function(p){p.detach()};return o})(a.Map);l.ChildInserter=g;var k=(function(o){__extends(n,o);function n(p){o.call(this);this.component=p;this.target=new a.UI.Component.ChildInserter()}n.prototype.unrender=function(){this.target.destroy()};n.prototype.trySet=function(r,q){var p=o.prototype.trySet.call(this,r,q);if(p===undefined){return}var s=new l.Child(this.component,r);this.target.trySet(s,q);return p};n.prototype.trySetKey=function(q,r){var p=o.prototype.trySetKey.call(this,q,r);if(p===undefined){return}this.target.trySetKey(q,r);return p};n.prototype.tryRemove=function(p){var q=o.prototype.tryRemove.call(this,p);if(q===undefined){return}this.target.tryRemove(p);return q};n.prototype.trySplice=function(t,u){var w=this;var v=o.prototype.trySplice.call(this,t,u);if(v===undefined){return}var q=v.removedItems;var s=v.addedItems;var r=a.Map.map(s,function(x){return new l.Child(w.component,x)},this);var p=this.target.trySplice(a.Map.getRemovedKeys(q,s),r);return v};n.prototype.tryClear=function(){var p=o.prototype.tryClear.call(this);if(p===undefined){return}this.target.tryClear();return p};n.prototype.tryReindex=function(q){var p=o.prototype.tryReindex.call(this,q);if(p===undefined){return}this.target.tryReindex(q);return p};return n})(a.Map);l.Children=k;var i=(function(o){__extends(n,o);function n(q,r,p){var t=this;o.call(this);this.parent=q;this.source=r;a.Set.add(q._collections,this);var s=this.own(r.createMapper({createItem:function(u){t.parent._initChild(u);return u},destroyItem:function(u){t.parent._doneChild(u)},scope:this}));this.own(new l.CollectionInserter(s.target,p[0]))}n.prototype.destroy=function(){a.Set.remove(this.parent._collections,this);o.prototype.destroy.call(this)};n.prototype._afterAppend=function(){this.source.each(d._afterAppend)};return n})(a.Class);l.Collection=i;var e=(function(o){__extends(n,o);function n(q,p){o.call(this);this.el=p;this.len=0;this.own(q.createObserver({addItem:this._addItem,removeItem:this._removeItem,scope:this}))}n.prototype._addItem=function(r){var q=this.el;var p=q.childNodes[this.len];var s=r.el[0];if(p!=null){q.insertBefore(s,p)}else{q.appendChild(s)}++this.len;r._afterAppend()};n.prototype._removeItem=function(p){d.remove(p.el[0]);--this.len};return n})(a.Class);l.CollectionInserter=e;var j=(function(o){__extends(n,o);function n(){o.apply(this,arguments)}n.prototype._getElement=function(p){return p.el[0]};n.prototype._addItem=function(q,p){o.prototype._addItem.call(this,q,p);q._afterAppend()};return n})(d.AbstractInserter);l.Inserter=j;var f=(function(o){__extends(n,o);function n(q,p,s){var r=this;o.call(this);this.parent=q;this.id=s;a.Set.add(q._replaceables,this);this.own(new a.Switcher([p],{init:function(t){r.parent.children.set(t,r.id)},done:function(){r.parent.children.remove(r.id)}}))}n.prototype.destroy=function(){a.Set.remove(this.parent._replaceables,this);o.prototype.destroy.call(this)};return n})(a.Class);l.Replaceable=f})(c=d.Component||(d.Component={}))})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())
};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(g){f.call(this);this.output=null;this.requiresAfterAppend=true;this.el=jQuery(g)[0]}e.prototype.createElement=function(){if(this.output!==null){return this.output}this.groups={};this._compileAttributes(this.el);var j={};for(var h=0,g=this.ids.length;h<g;++h){var k=this.ids[h];j[k]=this.groups[k]}this.output={root:this.el,groups:j};return this.output};e.prototype._addElement=function(i,g,h){this.groups[i]=this.groups[i]||[];this.groups[i].push(g)};return e})(d.AbstractTemplate);d.DomTemplate=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(){f.apply(this,arguments)}e.prototype._getElement=function(g){return g};return e})(d.AbstractInserter);d.Inserter=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(k,h,g,j,i){f.call(this);this.el=k;this.events=h;if(typeof g==="function"||typeof g==="boolean"){i=j;j=g;g=null}this.selector=g;if(i&&typeof j==="function"){this.handler=function(l){return j.call(i||this,l,this)}}else{this.handler=j}k.on(h,this.selector,this.handler)}e.prototype.destroyObject=function(){this.el.off(this.events,this.selector,this.handler);f.prototype.destroyObject.call(this)};return e})(a.Class);d.JQEventAttachment=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(g){f.call(this);this.html=g;this.mirror=null}e.prototype.createElement=function(){this._compile();var r=(this.mirror.cloneNode(true));var l={};for(var q=0,p=this.ids.length;q<p;++q){var g=this.ids[q];var v=this.groups[g];var t=v.length;var s=new _JW.A(t);for(var o=0;o<t;++o){var u=v[o];var h=r;for(var m=0,k=u.length;m<k;++m){h=(h.childNodes[u[m]])}s[o]=h}l[g]=s}return{root:r,groups:l}};e.prototype._addElement=function(i,g,h){this.groups[i]=this.groups[i]||[];this.groups[i].push(h.concat())};e.prototype._compile=function(){if(this.mirror!==null){return}this.mirror=d.parseHtml(this.html);this.groups={};this._compileAttributes(this.mirror)};return e})(d.AbstractTemplate);d.Template=c;d.template(d.Component,{main:"<div></div>"})})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(c){var d=(function(e){__extends(f,e);function f(h,g,i){e.call(this);this.el=h;this.attr=g;this.property=i;this._update();this.own(i.changeEvent.bind(this._update,this))}f.prototype._update=function(){this.el.attr(this.attr,this.property.get())};return f})(a.Class);c.AttrUpdater=d})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(c){var d=(function(e){__extends(f,e);function f(h,g){var i=this;if(g===void 0){g={}}e.call(this);this.el=h;this.update=function(){return i._update()};this.target=g.target||this.own(new a.Property());this._update();this.el.bind("change",this.update)}f.prototype.destroy=function(){this.el.unbind("change",this.update);e.prototype.destroy.call(this)};f.prototype._update=function(){this.target.set(this.el.prop("checked"))};return f})(a.Class);c.CheckedListener=d})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(h,g,i){f.call(this);this.el=h;this.cls=g;this.property=i;this._update();this.own(i.changeEvent.bind(this._update,this))}e.prototype._update=function(){this.el.toggleClass(this.cls,!!this.property.get())};return e})(a.Class);d.ClassUpdater=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(g,h){f.call(this);this.el=g;this.own(new a.Switcher([h],{init:function(i){this.el.addClass(i)},done:function(i){this.el.removeClass(i)},scope:this}))}return e})(a.Class);d.ClassNameUpdater=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(e){__extends(f,e);function f(h,g,i){e.call(this);this.el=h;this.style=g;this.property=i;this._update();this.own(i.changeEvent.bind(this._update,this))}f.prototype._update=function(){this.el.css(this.style,this.property.get())};return f})(a.Class);d.CssUpdater=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(g,h){f.call(this);this.el=g;this.property=h;this._update();this.own(h.changeEvent.bind(this._update,this))}e.prototype._update=function(){this.el.html(this.property.get())};return e})(a.Class);d.HtmlUpdater=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(g,j,h,i){if(i===void 0){i=a.UPDATE}f.call(this);if(i&a.UPDATE){this.own(new a.UI.PropUpdater(g,j,h))}if(j==="checked"&&(i&a.WATCH)){this.own(new a.UI.CheckedListener(g,{target:h}))}}return e})(a.Class);d.PropBinding=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(g,i,h){f.call(this);this.el=g;this.prop=i;this.property=h;this._update();this.own(h.changeEvent.bind(this._update,this))}e.prototype._update=function(){this.el.prop(this.prop,this.property.get());if(this.prop==="checked"){this.el.change()}};return e})(a.Class);d.PropUpdater=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(c){var d=(function(e){__extends(f,e);function f(h,g,i,j){if(j===void 0){j=a.UPDATE}e.call(this);if(j&a.UPDATE){this.own(new a.UI.RadioUpdater(h,g,i))}if(j&a.WATCH){this.own(new a.UI.RadioListener(h,g,{target:i}))}}return f})(a.Class);
c.RadioBinding=d})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(i,h,g){var j=this;if(g===void 0){g={}}f.call(this);this.el=i;this.name=h;this.config=g;this.update=function(){return j._update()};this.target=g.target||this.own(new a.Property());this._selector="input[type=radio][name='"+h+"']";this._update();this.el.on("change",this._selector,this.update)}e.prototype.destroy=function(){this.el.off("change",this._selector,this.update);f.prototype.destroy.call(this)};e.prototype._update=function(){var g=this.el.find(this._selector+":checked");this.target.set((g.length!==0)?g.attr("value"):null)};return e})(a.Class);d.RadioListener=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(e){__extends(f,e);function f(h,g,i){e.call(this);this.el=h;this.name=g;this.property=i;this._selector="input[type=radio][name='"+g+"']";this._update();this.own(i.changeEvent.bind(this._update,this))}f.prototype._update=function(){var h=this.property.get();if(h!=null){var g=this.el.find(this._selector+"[value='"+h+"']");if(g.length!==0){g.prop("checked",true).change();return}}this.el.find(this._selector+":checked").prop("checked",false).change()};return f})(a.Class);d.RadioUpdater=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(g,h){f.call(this);this.el=g;this.property=h;this._update();this.own(h.changeEvent.bind(this._update,this))}e.prototype._update=function(){this.el[0].textContent=this.property.get()};return e})(a.Class);d.TextUpdater=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(g,h,i,j){if(i===void 0){i=a.UPDATE}f.call(this);if(i&a.UPDATE){this.own(new a.UI.ValueUpdater(g,h))}if(i&a.WATCH){this.own(new a.UI.ValueListener(g,{target:h,simple:j}))}}return e})(a.Class);d.ValueBinding=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(e){__extends(f,e);function f(h,g){var i=this;if(g===void 0){g={}}e.call(this);this.el=h;this.update=function(){return i._update()};this.target=g.target||this.own(new a.Property());this.simple=g.simple||!d.isLifeInput(h);this.update();this.el.bind("change",this.update);if(!this.simple){this._timer=setInterval(this.update,100)}}f.prototype.destroy=function(){if(!this.simple){clearInterval(this._timer)}this.el.unbind("change",this.update);e.prototype.destroy.call(this)};f.prototype._update=function(){this.target.set(this.el.val())};return f})(a.Class);d.ValueListener=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(g,h){f.call(this);this.el=g;this.property=h;this._update();this.own(h.changeEvent.bind(this._update,this))}e.prototype._update=function(){this.el.val(this.property.get())};return e})(a.Class);d.ValueUpdater=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));var __extends=(this&&this.__extends)||function(f,a){for(var e in a){if(a.hasOwnProperty(e)){f[e]=a[e]}}function c(){this.constructor=f}f.prototype=a===null?Object.create(a):(c.prototype=a.prototype,new c())};var JW;(function(a){var b;(function(d){var c=(function(f){__extends(e,f);function e(g,h){f.call(this);this.el=g;this.property=h;this._update();this.own(h.changeEvent.bind(this._update,this))}e.prototype._update=function(){this.el.css("display",this.property.get()?"":"none")};return e})(a.Class);d.VisibleUpdater=c})(b=a.UI||(a.UI={}))})(JW||(JW={}));jQuery.extend(jQuery.fn,{jwon:function(b,a,d,c){return new JW.UI.JQEventAttachment(this,b,a,d,c)},jwattr:function(a,b){return new JW.UI.AttrUpdater(this,a,b)},jwclass:function(){var d=arguments[0],c=arguments[1];return(c!=null)?new JW.UI.ClassUpdater(this,d,c):new JW.UI.ClassNameUpdater(this,d)},jwcss:function(a,b){return new JW.UI.CssUpdater(this,a,b)},jwhtml:function(a){return new JW.UI.HtmlUpdater(this,a)},jwprop:function(d,a,c){if(a!=null){return new JW.UI.PropBinding(this,d,a,c)}if(d==="checked"){var b=new JW.Property();b.own(new JW.UI.CheckedListener(this,{target:b}));return b}throw new Error("Invalid argument")},jwradio:function(a,b,d){if(b!=null){return new JW.UI.RadioBinding(this,a,b,d)}var c=new JW.Property();c.own(new JW.UI.RadioListener(this,a,{target:c}));return c},jwtext:function(a){return new JW.UI.TextUpdater(this,a)},jwval:function(a,c,d){if(a!=null&&(typeof a!=="boolean")){return new JW.UI.ValueBinding(this,a,c,d)}var b=new JW.Property();b.own(new JW.UI.ValueListener(this,{target:b,simple:d}));return b},jwshow:function(a){return new JW.UI.VisibleUpdater(this,a)}});